System.register(["./core-legacy-DbRSgJay.js"],function(t,e){"use strict";var i,n,s;return{setters:[t=>{i=t.e,n=t.E,s=t.a}],execute:function(){class e{constructor(t){this.element=t?document.getElementById(t):null,this.listeners=[],this.isVisible=!0}addEventListener(t,e,i){const n={element:t,event:e,handler:i};t.addEventListener(e,i),this.listeners.push(n)}removeAllEventListeners(){this.listeners.forEach(({element:t,event:e,handler:i})=>{t.removeEventListener(e,i)}),this.listeners=[]}show(){this.element&&(this.element.classList.remove("hidden"),this.isVisible=!0)}hide(){this.element&&(this.element.classList.add("hidden"),this.isVisible=!1)}toggle(){this.isVisible?this.hide():this.show()}update(t){console.warn("update() method not implemented in",this.constructor.name)}destroy(){this.removeAllEventListeners(),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}setTextContent(t,e){const i=this.element?this.element.querySelector(t):document.querySelector(t);i&&(i.textContent=e)}setHTML(t,e){const i=this.element?this.element.querySelector(t):document.querySelector(t);i&&(i.innerHTML=e)}addClass(t,e){const i=this.element?this.element.querySelector(t):document.querySelector(t);i&&i.classList.add(e)}removeClass(t,e){const i=this.element?this.element.querySelector(t):document.querySelector(t);i&&i.classList.remove(e)}formatNumber(t,e=0){return new Intl.NumberFormat("en-US",{minimumFractionDigits:e,maximumFractionDigits:e}).format(t)}formatPercentage(t,e=1){return`${this.formatNumber(t,e)}%`}formatCurrency(t,e="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}createElement(t,e="",i=""){const n=document.createElement(t);return e&&(n.className=e),i&&(n.textContent=i),n}}t("B",e),t("D",class extends e{constructor(){super(),this.initializeElements(),this.setupEventListeners()}initializeElements(){this.gameTimeElement=document.getElementById("game-time"),this.approvalRatingElement=document.getElementById("approval-rating"),this.nextElectionElement=document.getElementById("next-election"),this.gdpGrowthElement=document.getElementById("gdp-growth"),this.unemploymentElement=document.getElementById("unemployment"),this.inflationElement=document.getElementById("inflation"),this.nationalDebtElement=document.getElementById("national-debt"),this.coalitionSupportElement=document.getElementById("coalition-support"),this.coalitionStabilityElement=document.getElementById("coalition-stability"),this.oppositionElement=document.getElementById("opposition"),this.politicalPressureElement=document.getElementById("political-pressure"),this.independentsElement=document.getElementById("independents"),this.nextVoteElement=document.getElementById("next-vote"),this.intlStandingElement=document.getElementById("intl-standing"),this.tradeBalanceElement=document.getElementById("trade-balance"),this.diplomaticRelationsElement=document.getElementById("diplomatic-relations"),this.recentEventsElement=document.getElementById("recent-events"),this.pendingDecisionsElement=document.getElementById("pending-decisions"),this.pauseBtn=document.getElementById("pause-btn"),this.nextTurnBtn=document.getElementById("next-turn-btn"),this.saveBtn=document.getElementById("save-btn"),this.loadBtn=document.getElementById("load-btn")}setupEventListeners(){i.on(n.UI_UPDATE,t=>{this.update(t.data.gameState)}),i.on(n.TURN_END,t=>{this.update(t.data.gameState)}),i.on(n.GAME_START,t=>{t.data&&t.data.gameState&&this.update(t.data.gameState)}),this.pauseBtn&&this.addEventListener(this.pauseBtn,"click",()=>{this.handlePauseToggle()}),this.nextTurnBtn&&this.addEventListener(this.nextTurnBtn,"click",()=>{i.emit(n.GAME_START)}),this.saveBtn&&this.addEventListener(this.saveBtn,"click",()=>{this.handleSaveGame()}),this.loadBtn&&this.addEventListener(this.loadBtn,"click",()=>{this.handleLoadGame()})}update(t){if(t)try{this.updateHeader(t),this.updateEconomicPanel(t),this.updatePoliticalPanel(t),this.updateGlobalPanel(t),this.updateEvents(t)}catch(e){console.error("Error updating dashboard:",e)}else console.warn("Dashboard update called with no game state")}updateHeader(t){if(this.gameTimeElement&&(this.gameTimeElement.textContent=`Week ${t.time.week}, Year ${t.time.year}`),this.approvalRatingElement){const{approval:e}=t.politics;this.approvalRatingElement.textContent=`Approval: ${this.formatPercentage(e)}`,this.approvalRatingElement.className="",e>=60?this.approvalRatingElement.classList.add("text-success"):e>=40||this.approvalRatingElement.classList.add("text-danger")}if(this.nextElectionElement){const e=t.politics.nextElection,i=52*(e.year-t.time.year)+(e.week-t.time.week);this.nextElectionElement.textContent=`Next Election: ${i}w`}}updateEconomicPanel(t){const{economy:e}=t;if(this.gdpGrowthElement){const t=e.gdpGrowth;this.gdpGrowthElement.textContent=`${t>=0?"+":""}${this.formatNumber(t,1)}%`,this.gdpGrowthElement.className=t>=0?"text-success":"text-danger"}if(this.unemploymentElement&&(this.unemploymentElement.textContent=this.formatPercentage(e.unemployment)),this.inflationElement){const{inflation:t}=e;this.inflationElement.textContent=this.formatPercentage(t,1),this.inflationElement.className="",t>4?this.inflationElement.classList.add("text-warning"):t<1&&this.inflationElement.classList.add("text-danger")}if(this.nationalDebtElement){const e=t.country.debt/t.country.gdp*100;this.nationalDebtElement.textContent=`${this.formatPercentage(e)} of GDP`,this.nationalDebtElement.className=e>90?"text-danger":e>70?"text-warning":""}}updatePoliticalPanel(t){const{politics:e}=t;if(this.coalitionSupportElement){const t=e.coalition.reduce((t,e)=>t+e.support,0);this.coalitionSupportElement.textContent=this.formatPercentage(t)}if(this.coalitionStabilityElement){const t=e.coalition.reduce((t,e)=>t+e.support,0),i=Math.min(...e.coalition.map(t=>t.support)),n=Math.max(...e.coalition.map(t=>t.support)),s=t>0?i/n:0,a=e.approval/100,o=Math.min(100,50*s+50*a);this.coalitionStabilityElement.textContent=this.formatPercentage(o),this.coalitionStabilityElement.className="",o>=70?this.coalitionStabilityElement.classList.add("text-success"):o>=40||this.coalitionStabilityElement.classList.add("text-danger")}if(this.oppositionElement){const t=e.opposition.reduce((t,e)=>t+e.support,0);this.oppositionElement.textContent=this.formatPercentage(t)}if(this.politicalPressureElement){const i=e.opposition.reduce((t,e)=>t+e.support,0),n=Math.max(0,50-e.approval),s=.5*i,a=e.nextElection?e.nextElection.year:4,o=Math.max(1,52*(a-t.time.year)+(e.nextElection?.week||1)-t.time.week),c=.5*Math.max(0,52-o),l=Math.min(100,n+s+c);this.politicalPressureElement.textContent=this.formatPercentage(l),this.politicalPressureElement.className="",l>=70?this.politicalPressureElement.classList.add("text-danger"):l>=40?this.politicalPressureElement.classList.add("text-warning"):this.politicalPressureElement.classList.add("text-success")}if(this.independentsElement){const t=[...e.coalition,...e.opposition].reduce((t,e)=>t+e.support,0),i=Math.max(0,100-t);this.independentsElement.textContent=this.formatPercentage(i)}this.nextVoteElement&&(this.nextVoteElement.textContent=e.nextVote?e.nextVote:"None scheduled")}updateGlobalPanel(t){const{global:e}=t;if(this.intlStandingElement&&(this.intlStandingElement.textContent=e.internationalStanding),this.tradeBalanceElement){const t=e.tradeBalance;this.tradeBalanceElement.textContent=`${this.formatCurrency(t/1e9,"USD")}B`,this.tradeBalanceElement.className=t>=0?"text-success":"text-danger"}if(this.diplomaticRelationsElement){const t=Object.values(e.relations).reduce((t,e)=>t+e,0)/Object.values(e.relations).length;this.diplomaticRelationsElement.textContent=this.formatNumber(t)}}updateEvents(t){if(this.recentEventsElement){this.recentEventsElement.innerHTML="";const e=t.events.recent.slice(-5);if(0===e.length){const t=this.createElement("li","","No recent events");this.recentEventsElement.appendChild(t)}else e.forEach(t=>{const e=this.createElement("li",`event-item type-${t.type} severity-${t.severity}`,t.message||t.description),i=this.createElement("span","event-timestamp",` (${new Date(t.timestamp).toLocaleTimeString()})`);e.appendChild(i),this.recentEventsElement.appendChild(e)})}if(this.pendingDecisionsElement){this.pendingDecisionsElement.innerHTML="";const e=t.events.pending;if(0===e.length){const t=this.createElement("li","","No pending decisions");this.pendingDecisionsElement.appendChild(t)}else e.forEach(t=>{const e=this.createElement("li","decision-item",t.description||t);this.addEventListener(e,"click",()=>{this.handleDecisionClick(t)}),this.pendingDecisionsElement.appendChild(e)})}}handlePauseToggle(){i.emit("game:pause_toggle")}handleSaveGame(){const t=prompt("Enter a name for your save:");null!==t&&i.emit(n.GAME_SAVE,{saveName:t})}handleLoadGame(){i.emit("ui:load_game_dialog")}handleDecisionClick(t){i.emit("ui:decision_dialog",{decision:t}),console.log("Decision clicked:",t)}});class a extends e{constructor(t,e={}){super(t),this.options={type:"line",width:400,height:200,data:[],labels:[],colors:["#3498db","#e74c3c","#27ae60","#f39c12","#9b59b6"],title:"",showGrid:!0,showAxes:!0,showLegend:!0,...e},this.canvas=null,this.ctx=null,this.initializeChart()}initializeChart(){this.element?(this.canvas=this.createElement("canvas"),this.canvas.width=this.options.width,this.canvas.height=this.options.height,this.canvas.style.cssText="\n      max-width: 100%;\n      height: auto;\n      border: 1px solid var(--border-color);\n      border-radius: var(--border-radius);\n    ",this.element.innerHTML="",this.element.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.render()):console.error("Chart container element not found")}updateData(t,e=null){this.options.data=t,e&&(this.options.labels=e),this.render()}render(){if(!this.ctx)return;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.font="12px Arial",this.ctx.textAlign="center",this.ctx.textBaseline="middle";const t={top:this.options.title?30:20,right:20,bottom:this.options.showAxes?40:20,left:this.options.showAxes?50:20},e={x:t.left,y:t.top,width:this.canvas.width-t.left-t.right,height:this.canvas.height-t.top-t.bottom};switch(this.options.title&&this.drawTitle(),this.options.type){case"line":this.drawLineChart(e);break;case"bar":this.drawBarChart(e);break;case"pie":this.drawPieChart(e);break;case"area":this.drawAreaChart(e);break;default:console.warn(`Chart type ${this.options.type} not supported`)}this.options.showAxes&&"pie"!==this.options.type&&this.drawAxes(e),this.options.showLegend&&this.drawLegend(e)}drawTitle(){this.ctx.save(),this.ctx.font="bold 14px Arial",this.ctx.fillStyle="#2c3e50",this.ctx.textAlign="center",this.ctx.fillText(this.options.title,this.canvas.width/2,15),this.ctx.restore()}drawLineChart(t){const{data:e}=this.options;if(!e.length)return;const i=e[0].values?e[0].values.length:e.length,n=t.width/Math.max(1,i-1),s=e.flatMap(t=>t.values?t.values:[t]).filter(t=>"number"==typeof t),a=Math.min(...s),o=Math.max(...s)-a||1;this.options.showGrid&&this.drawGrid(t,i,5),e.forEach((e,i)=>{const s=this.options.colors[i%this.options.colors.length],c=e.values||[e];this.ctx.save(),this.ctx.strokeStyle=s,this.ctx.lineWidth=2,this.ctx.beginPath(),c.forEach((e,i)=>{const s=t.x+i*n,c=t.y+t.height-(e-a)/o*t.height;0===i?this.ctx.moveTo(s,c):this.ctx.lineTo(s,c)}),this.ctx.stroke(),this.ctx.restore(),this.ctx.save(),this.ctx.fillStyle=s,c.forEach((e,i)=>{const s=t.x+i*n,c=t.y+t.height-(e-a)/o*t.height;this.ctx.beginPath(),this.ctx.arc(s,c,3,0,2*Math.PI),this.ctx.fill()}),this.ctx.restore()})}drawBarChart(t){const{data:e}=this.options;if(!e.length)return;const i=e.map(t=>t.value||t),n=Math.max(...i),s=t.width/e.length*.8,a=t.width/e.length*.2;e.forEach((e,i)=>{const o=e.value||e,c=o/n*t.height,l=t.x+i*(s+a)+a/2,r=t.y+t.height-c,h=this.options.colors[i%this.options.colors.length];this.ctx.save(),this.ctx.fillStyle=h,this.ctx.fillRect(l,r,s,c),this.ctx.fillStyle="#2c3e50",this.ctx.textAlign="center",this.ctx.fillText(this.formatNumber(o),l+s/2,r-10),this.ctx.restore()})}drawPieChart(t){const{data:e}=this.options;if(!e.length)return;const i=e.map(t=>t.value||t).reduce((t,e)=>t+e,0),n=t.x+t.width/2,s=t.y+t.height/2,a=Math.min(t.width,t.height)/2-20;let o=-Math.PI/2;e.forEach((t,e)=>{const c=t.value||t,l=c/i*2*Math.PI,r=this.options.colors[e%this.options.colors.length];this.ctx.save(),this.ctx.fillStyle=r,this.ctx.beginPath(),this.ctx.moveTo(n,s),this.ctx.arc(n,s,a,o,o+l),this.ctx.closePath(),this.ctx.fill(),this.ctx.strokeStyle="#ffffff",this.ctx.lineWidth=2,this.ctx.stroke(),this.ctx.restore();const h=o+l/2,d=n+Math.cos(h)*a*.7,m=s+Math.sin(h)*a*.7,u=(c/i*100).toFixed(1);this.ctx.save(),this.ctx.fillStyle="#ffffff",this.ctx.font="bold 10px Arial",this.ctx.textAlign="center",this.ctx.fillText(`${u}%`,d,m),this.ctx.restore(),o+=l})}drawAreaChart(t){const{data:e}=this.options;if(!e.length)return;const i=e[0].values?e[0].values.length:e.length,n=t.width/Math.max(1,i-1),s=e.flatMap(t=>t.values?t.values:[t]).filter(t=>"number"==typeof t),a=Math.min(0,...s),o=Math.max(...s)-a||1;e.forEach((e,i)=>{const s=this.options.colors[i%this.options.colors.length],c=e.values||[e];this.ctx.save(),this.ctx.fillStyle=`${s}40`,this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y+t.height),c.forEach((e,i)=>{const s=t.x+i*n,c=t.y+t.height-(e-a)/o*t.height;this.ctx.lineTo(s,c)}),this.ctx.lineTo(t.x+(c.length-1)*n,t.y+t.height),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore()}),this.drawLineChart(t)}drawGrid(t,e,i){this.ctx.save(),this.ctx.strokeStyle="#e0e0e0",this.ctx.lineWidth=1;for(let n=0;n<=e;n+=1){const i=t.x+n/e*t.width;this.ctx.beginPath(),this.ctx.moveTo(i,t.y),this.ctx.lineTo(i,t.y+t.height),this.ctx.stroke()}for(let n=0;n<=i;n+=1){const e=t.y+n/i*t.height;this.ctx.beginPath(),this.ctx.moveTo(t.x,e),this.ctx.lineTo(t.x+t.width,e),this.ctx.stroke()}this.ctx.restore()}drawAxes(t){this.ctx.save(),this.ctx.strokeStyle="#2c3e50",this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(t.x,t.y+t.height),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y+t.height),this.ctx.lineTo(t.x+t.width,t.y+t.height),this.ctx.stroke(),this.ctx.restore(),this.options.labels.length>0&&this.drawAxisLabels(t)}drawAxisLabels(t){this.ctx.save(),this.ctx.fillStyle="#2c3e50",this.ctx.font="10px Arial",this.ctx.textAlign="center",this.options.labels.forEach((e,i)=>{const n=t.x+i/(this.options.labels.length-1)*t.width,s=t.y+t.height+15;this.ctx.fillText(e,n,s)}),this.ctx.restore()}drawLegend(t){if(!this.options.data.some(t=>t.name))return;const e=t.y+t.height+30;let i=t.x;this.ctx.save(),this.ctx.font="10px Arial",this.ctx.textAlign="left",this.options.data.forEach((t,n)=>{if(!t.name)return;const s=this.options.colors[n%this.options.colors.length];this.ctx.fillStyle=s,this.ctx.fillRect(i,e-6,12,12),this.ctx.fillStyle="#2c3e50",this.ctx.fillText(t.name,i+16,e),i+=100}),this.ctx.restore()}}t("C",a),t("E",class extends e{constructor(){super(),this.charts={},this.economicData=null,this.forecast=null,this.initializeScreen(),this.setupEventListeners()}initializeScreen(){let t=document.querySelector("#screen-economy");if(!t){t=this.createElement("div","screen"),t.id="screen-economy";const e=document.querySelector(".main-content");e&&e.appendChild(t)}this.element=t,this.renderEconomicsScreen()}renderEconomicsScreen(){this.element.innerHTML='\n      <div class="economics-screen">\n        <div class="economics-header">\n          <h1>Economic Simulation</h1>\n          <div class="economic-phase">\n            <span class="phase-indicator">Current Phase: <strong id="economic-phase">Expansion</strong></span>\n            <span class="phase-duration">Duration: <strong id="phase-duration">0 weeks</strong></span>\n          </div>\n        </div>\n\n        <div class="economics-content">\n          \x3c!-- Key Metrics Dashboard --\x3e\n          <div class="metrics-grid">\n            <div class="metric-card gdp-card">\n              <h3>GDP Growth</h3>\n              <div class="metric-value" id="gdp-growth-detailed">2.1%</div>\n              <div class="metric-trend" id="gdp-trend">▲ Stable</div>\n            </div>\n            <div class="metric-card unemployment-card">\n              <h3>Unemployment</h3>\n              <div class="metric-value" id="unemployment-detailed">6.0%</div>\n              <div class="metric-trend" id="unemployment-trend">▼ Decreasing</div>\n            </div>\n            <div class="metric-card inflation-card">\n              <h3>Inflation</h3>\n              <div class="metric-value" id="inflation-detailed">2.4%</div>\n              <div class="metric-trend" id="inflation-trend">▲ Increasing</div>\n            </div>\n            <div class="metric-card confidence-card">\n              <h3>Economic Confidence</h3>\n              <div class="metric-value" id="confidence-detailed">75</div>\n              <div class="metric-trend" id="confidence-trend">▲ Positive</div>\n            </div>\n          </div>\n\n          \x3c!-- Charts Section --\x3e\n          <div class="charts-section">\n            <div class="chart-container">\n              <h3>Economic Trends</h3>\n              <div id="economic-trends-chart" class="chart"></div>\n            </div>\n            <div class="chart-container">\n              <h3>Sector Performance</h3>\n              <div id="sector-performance-chart" class="chart"></div>\n            </div>\n          </div>\n\n          \x3c!-- Forecast Section --\x3e\n          <div class="forecast-section">\n            <h3>Economic Forecast (Next 12 Weeks)</h3>\n            <div id="forecast-chart" class="chart"></div>\n            <div class="forecast-summary">\n              <p id="forecast-summary-text">Economic projections will be displayed here.</p>\n            </div>\n          </div>\n\n          \x3c!-- Sector Breakdown --\x3e\n          <div class="sectors-section">\n            <h3>Economic Sectors</h3>\n            <div class="sectors-grid">\n              <div class="sector-card agriculture-sector">\n                <h4>Agriculture</h4>\n                <div class="sector-share" id="agriculture-share">5%</div>\n                <div class="sector-growth" id="agriculture-growth">+1.2%</div>\n              </div>\n              <div class="sector-card manufacturing-sector">\n                <h4>Manufacturing</h4>\n                <div class="sector-share" id="manufacturing-share">25%</div>\n                <div class="sector-growth" id="manufacturing-growth">+2.8%</div>\n              </div>\n              <div class="sector-card services-sector">\n                <h4>Services</h4>\n                <div class="sector-share" id="services-share">70%</div>\n                <div class="sector-growth" id="services-growth">+2.0%</div>\n              </div>\n            </div>\n          </div>\n\n          \x3c!-- Policy Tools --\x3e\n          <div class="policy-section">\n            <h3>Economic Policy Tools</h3>\n            <div class="policy-categories">\n              <div class="policy-category fiscal-policies">\n                <h4>Fiscal Policies</h4>\n                <div class="policy-buttons">\n                  <button class="btn btn--primary" id="fiscal-stimulus-btn">Fiscal Stimulus</button>\n                  <button class="btn btn--primary" id="tax-cut-btn">Tax Cuts</button>\n                  <button class="btn btn--secondary" id="tax-increase-btn">Tax Increase</button>\n                  <button class="btn btn--primary" id="infrastructure-btn">Infrastructure Investment</button>\n                </div>\n              </div>\n              \n              <div class="policy-category monetary-policies">\n                <h4>Monetary Policies</h4>\n                <div class="policy-buttons">\n                  <button class="btn btn--secondary" id="interest-rate-btn">Adjust Interest Rates</button>\n                </div>\n              </div>\n\n              <div class="policy-category sector-policies">\n                <h4>Sector-Specific Policies</h4>\n                <div class="policy-buttons">\n                  <button class="btn btn--primary" id="education-investment-btn">Education Investment</button>\n                  <button class="btn btn--primary" id="healthcare-investment-btn">Healthcare Investment</button>\n                  <button class="btn btn--primary" id="green-energy-btn">Green Energy Initiative</button>\n                  <button class="btn btn--primary" id="agricultural-subsidies-btn">Agricultural Subsidies</button>\n                </div>\n              </div>\n\n              <div class="policy-category trade-regulation">\n                <h4>Trade & Regulation</h4>\n                <div class="policy-buttons">\n                  <button class="btn btn--primary" id="trade-promotion-btn">Trade Promotion</button>\n                  <button class="btn btn--secondary" id="regulation-increase-btn">Increase Regulation</button>\n                  <button class="btn btn--primary" id="regulation-decrease-btn">Decrease Regulation</button>\n                  <button class="btn btn--primary" id="minimum-wage-btn">Minimum Wage Increase</button>\n                </div>\n              </div>\n            </div>\n            \n            <div class="active-policies">\n              <h4>Active Policies</h4>\n              <ul id="active-policies-list">\n                <li>No active economic policies</li>\n              </ul>\n            </div>\n          </div>\n\n          \x3c!-- Economic Events --\x3e\n          <div class="events-section">\n            <h3>Recent Economic Events</h3>\n            <ul id="economic-events-list" class="events-list">\n              <li>Economic simulation initialized</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    ',this.initializeCharts(),this.setupPolicyButtons()}initializeCharts(){this.charts.trends=new a("economic-trends-chart",{type:"line",width:500,height:200,title:"Economic Indicators Over Time",data:[{name:"GDP Growth",values:[],color:"#3498db"},{name:"Unemployment",values:[],color:"#e74c3c"},{name:"Inflation",values:[],color:"#f39c12"}],showLegend:!0}),this.charts.sectors=new a("sector-performance-chart",{type:"pie",width:300,height:200,title:"Economic Sectors",data:[{name:"Agriculture",value:5},{name:"Manufacturing",value:25},{name:"Services",value:70}],showLegend:!0}),this.charts.forecast=new a("forecast-chart",{type:"line",width:600,height:200,title:"Economic Forecast",data:[],showLegend:!0})}setupPolicyButtons(){const t=document.getElementById("fiscal-stimulus-btn"),e=document.getElementById("tax-cut-btn"),i=document.getElementById("tax-increase-btn"),n=document.getElementById("infrastructure-btn"),s=document.getElementById("interest-rate-btn"),a=document.getElementById("education-investment-btn"),o=document.getElementById("healthcare-investment-btn"),c=document.getElementById("green-energy-btn"),l=document.getElementById("agricultural-subsidies-btn"),r=document.getElementById("trade-promotion-btn"),h=document.getElementById("regulation-increase-btn"),d=document.getElementById("regulation-decrease-btn"),m=document.getElementById("minimum-wage-btn");t&&this.addEventListener(t,"click",()=>{this.implementPolicy("fiscal_stimulus",{name:"Fiscal Stimulus Package",amount:.02,duration:24})}),e&&this.addEventListener(e,"click",()=>{this.implementPolicy("tax_cut",{name:"Tax Cuts",amount:.015,duration:52})}),i&&this.addEventListener(i,"click",()=>{this.implementPolicy("tax_increase",{name:"Tax Increase",amount:.02,duration:52})}),n&&this.addEventListener(n,"click",()=>{this.implementPolicy("infrastructure_investment",{name:"Infrastructure Investment",amount:.05,duration:104})}),s&&this.addEventListener(s,"click",()=>{const t=prompt("Enter interest rate change (e.g., -0.5 for 0.5% decrease):");null!==t&&this.implementPolicy("interest_rate_change",{name:"Interest Rate "+(parseFloat(t)>0?"Increase":"Decrease"),change:parseFloat(t)||0,duration:1})}),a&&this.addEventListener(a,"click",()=>{this.implementPolicy("education_investment",{name:"Education Investment",amount:.03,duration:78})}),o&&this.addEventListener(o,"click",()=>{this.implementPolicy("healthcare_investment",{name:"Healthcare Investment",amount:.025,duration:104})}),c&&this.addEventListener(c,"click",()=>{this.implementPolicy("green_energy_investment",{name:"Green Energy Initiative",amount:.04,duration:156})}),l&&this.addEventListener(l,"click",()=>{this.implementPolicy("agricultural_subsidies",{name:"Agricultural Subsidies",amount:.006,duration:52})}),r&&this.addEventListener(r,"click",()=>{this.implementPolicy("trade_promotion",{name:"Trade Promotion Initiative",amount:.012,duration:39})}),h&&this.addEventListener(h,"click",()=>{this.implementPolicy("regulation_increase",{name:"Increase Regulations",amount:.015,duration:26})}),d&&this.addEventListener(d,"click",()=>{this.implementPolicy("regulation_decrease",{name:"Decrease Regulations",amount:.02,duration:26})}),m&&this.addEventListener(m,"click",()=>{this.implementPolicy("minimum_wage_increase",{name:"Minimum Wage Increase",amount:.008,duration:26})})}setupEventListeners(){i.on("economic:update",t=>{this.economicData=t.data,this.updateDisplay()}),i.on("economic:event",t=>{this.addEconomicEvent(t.data)}),i.on("economic:policy_applied",t=>{this.updateActivePolicies()})}updateDisplay(){if(!this.economicData)return;const{metrics:t,sectors:e,cycle:i}=this.economicData;this.updateElement("gdp-growth-detailed",`${t.gdpGrowth.toFixed(1)}%`),this.updateElement("unemployment-detailed",`${t.unemployment.toFixed(1)}%`),this.updateElement("inflation-detailed",`${t.inflation.toFixed(1)}%`),this.updateElement("confidence-detailed",t.confidence.toFixed(0)),this.updateElement("economic-phase",i.phase.charAt(0).toUpperCase()+i.phase.slice(1)),this.updateElement("phase-duration",`${i.duration} weeks`),Object.keys(e).forEach(t=>{const i=e[t];this.updateElement(`${t}-share`,`${(100*i.share).toFixed(0)}%`),this.updateElement(`${t}-growth`,`${i.currentGrowth?.toFixed(1)||i.growth.toFixed(1)}%`)}),this.updateTrends(t),this.updateSectorChart(e),this.updateForecast()}updateTrends(t){const e=[{name:"GDP Growth",values:[t.gdpGrowth]},{name:"Unemployment",values:[t.unemployment]},{name:"Inflation",values:[t.inflation]}];this.charts.trends.updateData(e)}updateSectorChart(t){const e=Object.keys(t).map(e=>({name:e.charAt(0).toUpperCase()+e.slice(1),value:100*t[e].share}));this.charts.sectors.updateData(e)}updateForecast(){this.forecast=s.getForecast(12);const t=[{name:"GDP Growth",values:this.forecast.gdpGrowth},{name:"Unemployment",values:this.forecast.unemployment},{name:"Inflation",values:this.forecast.inflation}],e=Array.from({length:12},(t,e)=>`Week ${e+1}`);this.charts.forecast.updateData(t,e);const i=this.generateForecastSummary();this.updateElement("forecast-summary-text",i)}generateForecastSummary(){if(!this.forecast)return"Forecast data not available.";const t=this.forecast.gdpGrowth[this.forecast.gdpGrowth.length-1],e=this.forecast.unemployment[this.forecast.unemployment.length-1],i=this.forecast.inflation[this.forecast.inflation.length-1];let n="Economic forecast shows ";return t>this.economicData.metrics.gdpGrowth?n+="improving growth, ":n+="slowing growth, ",e<this.economicData.metrics.unemployment?n+="decreasing unemployment, ":n+="rising unemployment, ",n+=`and inflation ${i>3?"above target":"near target"}.`,n}implementPolicy(t,e){i.emit("policy:implemented",{policy:{type:t,...e}}),i.emit("economic:event",{type:"policy_implemented",message:`Implemented: ${e.name}`,severity:"info"})}updateActivePolicies(){const t=s.getEconomicState(),e=document.getElementById("active-policies-list");e&&(0===t.activePolicies?e.innerHTML="<li>No active economic policies</li>":e.innerHTML=`<li>${t.activePolicies} active economic policies</li>`)}addEconomicEvent(t){const e=document.getElementById("economic-events-list");if(e){const i=this.createElement("li",`event-${t.severity||"info"}`,t.message);for(e.insertBefore(i,e.firstChild);e.children.length>10;)e.removeChild(e.lastChild)}}updateElement(t,e){const i=document.getElementById(t);i&&(i.textContent=e)}show(){super.show(),this.economicData=s.getEconomicState(),this.updateDisplay()}})}}});
